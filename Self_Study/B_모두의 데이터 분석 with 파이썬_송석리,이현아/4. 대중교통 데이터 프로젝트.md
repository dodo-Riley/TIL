# 4. 대중교통 데이터 프로젝트

- 대중교통 데이터 시각화하기
    - 유임 승차 비율이 가장 높은 역 찾기
      
        ```python
        import csv
        
        f = open('./data/subwayfee_12.csv')
        data = csv.reader(f)
        next(data)
        
        rate_high = 0 # 초기값 설정
        
        for row in data :
        	for i in range(4,8) :
        		row[i] = int(row[i]) # 데이터 내 요소를 정수로 변환
        	if row[6] != 0 and (row[4]+row[6]) > 100000 : # 무임승차가 0이 아니고 유무임승차 인원이 100000보다 크면
        		rate = row[4] / (row[4]+row[6]) # 유무임승차 인원 대비 유임 승차 인원 비율 구하기
        	if rate > rate_high :
        		rate_high = rate   # 최대값으로 갱신
        		station = row[3] + ' ' + row[1] # 해당 값의 역 이름 저장
        
        print(station, round(rate_high*100,2)) # 역이름과 비율을 백분위로 출력
        # 서울역 경부선 94.96
        		
        ```
        
    - 유무임 승하차 인원이 각각 가장 많은 역 찾기
      
        ```python
        import csv
        
        f = open('./data/subwayfee_12.csv')
        data = csv.reader(f)
        next(data)
        
        label = ['유임승차','유임하차','무임승차','무임하차']
        mx = [0,0,0,0]
        mx_station = ['','','',''] # 초기값 설정
        
        for row in data :
        	for i in range(4,8) :
        		row[i] = int(row[i])
        		if row[i] > mx[i-4] : # 각 인원수가 기존보다 많으면
        			mx[i-4] = row[i]   # 해당 행의 요소로 갱신
        			mx_station[i-4] = row[3]+' '+row[1]
        
        for i in range(4) :
        	print(label[i]+' : '+ma_station[i],mx[i])
        
        # 유임승차 : 강남 2호선 2039844
        # 유임하차 : 강남 2호선 2034226
        # 무임승차 : 종로3가 1호선 249355
        # 무임하차 : 제기동 1호선 241771
        ```
        
    - 특정 역의 유무임 승차하 비율을 파이 차트로 그리기
      
        ```python
        import csv 
        import matplotlib.pyplot as plt
        
        f = open('./data/subwayfee_12.csv')
        data = csv.reader(f)
        next(data)
        
        label = ['유임승차','유임하차','무임승차','무임하차']
        color = ['darkgreen','green','limegreen','springgreen']
        
        name = input('원하는 역명을 입력하세요 : ')
        name_2 = input('원하는 호선을 입력하세요 : ')
        
        for row in data :
        	for i in range(4,8):
        		row[i] = int(row[i])
        	if name == row[3] and name_2 == row[1] :
        		plt.figure(dpi=300)
        		plt.title(row[3]+' '+row[1]+'의 승하차 비율')
        		plt.pie(row[4:8], labels=label, colors=color, autopct='%1.f%%')
        		plt.axis('equal')
        		plt.savefig(row[3]+' '+row[1]+'의 승하차 비율.png') # 현재 작업 폴더에 이미지 저장
        		plt.show()
        ```
        
        ![Untitled](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/12d6bf2d-6d18-4cf7-8769-bebf8ee0e305/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220109%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20220109T110838Z&X-Amz-Expires=86400&X-Amz-Signature=5161b222c81951c348e09481f4229b5835e7961ccc5fc8311f21e1c3f238b5a2&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22Untitled.png%22&x-id=GetObject)