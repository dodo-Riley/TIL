# 2. 데이터 시각화 기초

# 2.1. Matplotlib를 이용해 그래프 그리기

> `matplotlib` : 파이썬에서 2D 형태의 그래프, 이미지 등을 그릴 때 사용하는 라이브러리
> 

- 기본적인 그래프
    
    ```python
    import matplotlib.pyplot as plt
    plt.plot([2,4,6,8])
    plt.show()
    ```
    
    ![Untitled](2%20%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%89%E1%85%B5%E1%84%80%E1%85%A1%E1%86%A8%E1%84%92%E1%85%AA%20%E1%84%80%E1%85%B5%E1%84%8E%E1%85%A9%202d5e59976fcd4ba2affe0f6908a50bfc/Untitled.png)
    
    ```python
    import matplotlib.pyplot as plt
    plt.plot([1,2,3,4], [1,3,5,2])
    plt.show()
    ```
    
    ![Untitled](2%20%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%89%E1%85%B5%E1%84%80%E1%85%A1%E1%86%A8%E1%84%92%E1%85%AA%20%E1%84%80%E1%85%B5%E1%84%8E%E1%85%A9%202d5e59976fcd4ba2affe0f6908a50bfc/Untitled%201.png)
    

- 옵션
    - 제목 : `title()` 함수 사용
        
        ```python
        import matplotlib.pyplot as plt
        plt.title('Plot_1')
        plt.plot([1,2,3,4], [1,3,5,2])
        plt.show()
        ```
        
        ![Untitled](2%20%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%89%E1%85%B5%E1%84%80%E1%85%A1%E1%86%A8%E1%84%92%E1%85%AA%20%E1%84%80%E1%85%B5%E1%84%8E%E1%85%A9%202d5e59976fcd4ba2affe0f6908a50bfc/Untitled%202.png)
        
    
    - 범례 : `legend()` 함수 사용, `legend(loc=’숫자’)`의 꼴로 범례의 위치를 지정할 수 있다. 숫자는 0~10이 가능하며, 숫자에 따른 위치는 아래 표와 같다. 0은 그래프에 따라 자동으로 위치를 지정한다.
        
        
        | 2 | 9 | 1 |
        | --- | --- | --- |
        | 6 | 10 | 5,7 |
        | 3 | 8 | 4 |
        
        ```python
        import matplotlib.pyplot as plt
        plt.title('Plot_2_legend')
        plt.plot([1,2,3,4], [2,4,6,8], label='increase')
        plt.plot([1,2,3,4], [8,6,4,2], label='decrease')
        plt.legend()
        plt.show()
        ```
        
        ![Untitled](2%20%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%89%E1%85%B5%E1%84%80%E1%85%A1%E1%86%A8%E1%84%92%E1%85%AA%20%E1%84%80%E1%85%B5%E1%84%8E%E1%85%A9%202d5e59976fcd4ba2affe0f6908a50bfc/Untitled%203.png)
        
    
    - 색상 : `color` 속성을 추가한다. 약자로 표기해도 가능하다.
        
        ```python
        import matplotlib.pyplot as plt
        plt.title('Plot_2_legend_color')
        plt.plot([1,2,3,4], [2,4,6,8], color = 'blue', label='increase')
        plt.plot([1,2,3,4], [8,6,4,2], 'r', label='decrease')
        plt.legend()
        plt.show()
        ```
        
        ![Untitled](2%20%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%89%E1%85%B5%E1%84%80%E1%85%A1%E1%86%A8%E1%84%92%E1%85%AA%20%E1%84%80%E1%85%B5%E1%84%8E%E1%85%A9%202d5e59976fcd4ba2affe0f6908a50bfc/Untitled%204.png)
        
    
    - 선 모양 : `linestyle` 속성을 추가한다. `ls`라고 입력해도 되고, 색깔과 한번에 입력해도 같은 결과가 출력된다.
        
        ```python
        import matplotlib.pyplot as plt
        plt.title('Plot_2_legend_color_ls')
        plt.plot([1,2,3,4], [2,4,6,8], color = 'blue', linestyle = '--', label='increase')
        plt.plot([1,2,3,4], [8,6,4,2], 'r:', label='decrease')
        plt.legend()
        plt.show()
        ```
        
        ![Untitled](2%20%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%89%E1%85%B5%E1%84%80%E1%85%A1%E1%86%A8%E1%84%92%E1%85%AA%20%E1%84%80%E1%85%B5%E1%84%8E%E1%85%A9%202d5e59976fcd4ba2affe0f6908a50bfc/Untitled%205.png)
        
    
    - 마커 모양 : `marker` 속성을 추가한다. 선 모양과 마찬가지로 한꺼번에 입력해도 같은 결과를 출력한다.
        
        ```python
        import matplotlib.pyplot as plt
        plt.title('Plot_2_legend_color_ls_mk')
        plt.plot([1,2,3,4], [2,4,6,8], 'b.', label='increase')
        plt.plot([1,2,3,4], [8,6,4,2], 'r^--', label='decrease')
        plt.legend()
        plt.show()
        ```
        
        ![Untitled](2%20%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%89%E1%85%B5%E1%84%80%E1%85%A1%E1%86%A8%E1%84%92%E1%85%AA%20%E1%84%80%E1%85%B5%E1%84%8E%E1%85%A9%202d5e59976fcd4ba2affe0f6908a50bfc/Untitled%206.png)
        

# 2.2. 내 생일 이후 년도의 생일날 기온 변화를 그래프로 그리기

- 데이터에서 날짜를 년도, 월, 일로 나누어 출력하는 법 : `split()` 함수 사용
    
    ```python
    a = '2021-12-27'
    b = a.split('-')
    print(a.split('-')[0])
    print(a.split('-')[1])
    print(a.split('-')[2])
    ```
    
- `seoul.csv` 파일을 열어서 데이터 중 날짜를 찾고, 이를 분리해 내 생일과 월/일이 동일한 날짜만 뽑는다. 그리고 해당하는 날짜의 최고 기온과 최저 기온을 이용해 그래프를 그리면 된다. 이를 수행하는 코드는 아래와 같다.
    
    ```python
    import csv
    import matplotlib.pyplot as plt     # 필요한 모듈 호출
    
    f = open('C:/Users/sjh73/Desktop/Code_SJH/data/seoul.csv', 'r', encoding='cp949')
    data = csv.reader(f, delimiter = ',')
    header = next(data)               # seoul.csv파일 읽기 및 data, header 지정
    
    max = []  
    min = []        # 최고기온, 최저기온 값을 받을 변수 초기값 지정
    
    for row in data:                                       # data의 각 행에 대해 반복
        if row[-1] != '' and row[-2] != '' :               # 행의 가장 마지막과 마지막에서 두번째 값이 비어있지 않다면
            date = row[0].split('-')                       # date에 행의 가장 첫 번째 값을 '-' 기준으로 구분해 저장
            if 1992 <= int(date[0]) :                      # date의 가장 첫 번째 값을 정수형으로 바꾼 값이 1992보다 크다면
                if (date[1] == '03') & (date[2] == '05') : # date의 두 번째 값이 '03'이고 세 번째 값이 '05'라면
                    max.append(float(row[-1]))             # max리스트에 data의 행에서 마지막 값을 실수형으로 추가
                    min.append(float(row[-2]))             # min리스트에 data의 행에서 마지막에서 두 번째 값을 실수형으로 추가
                    
    f.close()    # 파일 닫기
    
    plt.title('내 생일의 기온 변화')         # 그래프의 제목
    plt.plot(max, 'r', label = '최고온도')   # max 리스트를 가지고 빨간 색의 그래프를 그림
    plt.plot(min, 'b', label = '최저온도')   # min 리스트를 가지고 파란 색의 그래프를 그림
    plt.legend(loc=0)                       # 범례 지정
    plt.show()
    ```
    
    ![Untitled](2%20%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%89%E1%85%B5%E1%84%80%E1%85%A1%E1%86%A8%E1%84%92%E1%85%AA%20%E1%84%80%E1%85%B5%E1%84%8E%E1%85%A9%202d5e59976fcd4ba2affe0f6908a50bfc/Untitled%207.png)
    
- 출력 데이터에서 제목의 한글이나 세로 축의 마이너스 부호가 깨지지 않도록 아래 코드를 추가해야한다.
    
    ```python
    plt.rc('font', family = 'Malgun Gothic')
    plt.rcParams['axes.unicode_minus'] = False
    ```
    
    ```python
    import csv
    import matplotlib.pyplot as plt
    
    f = open('C:/Users/sjh73/Desktop/Code_SJH/data/seoul.csv', 'r', encoding='cp949')
    data = csv.reader(f, delimiter = ',')
    header = next(data)               # 여기까지 이전 코드 참고
    
    max = []
    min = []
    
    for row in data:
        if row[-1] != '' and row[-2] != '' :
            date = row[0].split('-')
            if 1992 <= int(date[0]) :
                if (date[1] == '03') & (date[2] == '05') :
                    max.append(float(row[-1]))
                    min.append(float(row[-2]))
                    
    f.close()
    
    plt.rc('font', family = 'Malgun Gothic')
    plt.rcParams['axes.unicode_minus'] = False
    plt.title('내 생일의 기온 변화')
    plt.plot(max, 'r', label = '최고온도')
    plt.plot(min, 'b', label = '최저온도')
    plt.legend(loc=0)
    plt.show()
    ```
    
    ![Untitled](2%20%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%89%E1%85%B5%E1%84%80%E1%85%A1%E1%86%A8%E1%84%92%E1%85%AA%20%E1%84%80%E1%85%B5%E1%84%8E%E1%85%A9%202d5e59976fcd4ba2affe0f6908a50bfc/Untitled%208.png)